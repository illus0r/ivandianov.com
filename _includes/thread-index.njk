---
layout: default.njk
---

<article class="thread-index">
  <h1>{{ title }}</h1>
  
  <div class="meta">
    <span class="progress" style="--progress: 360deg;"></span> {{ 'Тред' if lang == 'ru' else 'Thread' }}
  </div>

  {% if content %}
  <div class="thread-description">
    {{ content | safe }}
  </div>
  {% endif %}

  <hr>

  <div class="thread-feed">
    {%- set collectionName = "thread" + (threadName | capitalize) -%}
    {%- if lang == "en" -%}
      {%- set collectionName = collectionName + "En" -%}
    {%- endif -%}
    
    {% for post in collections[collectionName] %}
    <article class="thread-feed-item">
      {% if post.data.title %}
      <h2>
        <a href="{{ post.url }}">{{ post.data.title }}</a>
      </h2>
      {% endif %}

      {% if post.data.date %}
      <div class="meta">
        <a href="{{ post.url }}" class="time">
          {{ post.data.date.toISOString().split('T')[0] }}
        </a>
      </div>
      {% endif %}

      {% if post.data.images %}
        {% for img in post.data.images %}
        <img src="{{ img }}" class="thread-image" alt="" loading="lazy">
        {% endfor %}
      {% endif %}

      <div class="thread-content">
        {{ post.templateContent | safe }}
      </div>
    </article>
    {% endfor %}
  </div>

  <footer class="thread-footer">
    <p><a href="{{ '/' + lang + '/blog' if lang == 'ru' else '/blog' }}">
      ← {{ 'Вернуться в блог' if lang == 'ru' else 'Back to blog' }}
    </a></p>
  </footer>
</article>
