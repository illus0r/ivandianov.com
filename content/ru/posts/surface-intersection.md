---
title: –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π
date: 2021-03-03 06:35:00
progress: 3
---

–Ø —Å–¥–µ–ª–∞–ª —ç—Ç—É —Å—Ç–∞—Ç—å—é –∏–∑ —Å–≤–æ–µ–≥–æ —Ç–≤–∏—Ç—Ç–µ—Ä-—Ç—Ä–µ–¥–∞ [https://twitter.com/i_dianov/status/1367136469853351944](https://twitter.com/i_dianov/status/1367136469853351944)

![](/assets/media/2022-02-17-11-09-37.png)
–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å—Ñ–µ—Ä—ã —Å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ–º –≥–∏—Ä–æ–∏–¥–∞ –∏ —Å—Ñ–µ—Ä—ã {.caption}

–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç—É—Ç–æ—Ä–∏–∞–ª –æ —Ç–æ–º, –∫–∞–∫ –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π (–Ω–µ –æ–±—ä—ë–º–æ–≤), —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ #SDF —Ñ–æ—Ä–º—ã –¥–ª—è #raymarching.

---

1. –ù–∞—á–Ω—ë–º —Å –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–π–º–∞—Ä—à–∏–Ω–≥–∞

``` glsl
#define SPHERE length(p)-1.
#define SDF(p) SPHERE
vec3 p; float d=0.,i,e=1.; for(;i++<99.&&e>.01; p=d*normalize(vec3((FC.xy-.5*r)/r.y,1))+ vec3(0,0,-5), p*=rotate3D(t,vec3(.3,1,0)), d+=e=.5*SDF(p)); o+=100./i/i;
```
[https://bit.ly/3b9u7AL](https://bit.ly/3b9u7AL)
{.caption}

–ù–µ –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –Ω–∏–∂–Ω—é—é —Å—Ç—Ä–æ–∫—É, –¥–∞–≤–∞–π—Ç–µ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ —Å—Ç—Ä–æ–∫–µ, –Ω–∞—á–∏–Ω–∞—é—â–µ–π—Å—è —Å

```
#define SDF(p) ‚Ä¶
```

–û–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–æ—Ä–º—É –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –í–æ—Ç —Å—Ñ–µ—Ä–∞:

```
#define SPHERE length(p)-1.
#define SDF(p) SPHERE
```

![](/assets/media/2022-02-17-11-07-46.png)

---

2. –ê –≤–æ—Ç SDF –¥–ª—è –ø–ª–æ—Å–∫–æ—Å—Ç–∏ Z (–æ–Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞ –æ—Å—è–º X –∏ Y) [https://bit.ly/3e4nd1D](https://bit.ly/3e4nd1D)

```
#define PLANE_Z -p.z
#define SDF(p) PLANE_Z
```
![](/assets/media/surface-intersection-2.gif)

---

3. –ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –¥–≤—É—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π, –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ–º

```
#define SDF(p) length(vec2(PLANE_Z, SPHERE))
```

–ò –ë–£–ú!üí• –ö—Ä—É–≥ –ø–æ—è–≤–∏–ª—Å—è! https://bit.ly/3bXGTBJ

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ `length` –¥–≤—É—Ö SDF –±–ª–∏–∑–æ–∫ –∫ –Ω—É–ª—é, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–±–∞ SDF –±–ª–∏–∑–∫–∏ –∫ –Ω—É–ª—é.

![](/assets/media/surface-intersection-3.gif)

---

4. –ú—ã –º–æ–∂–µ–º –Ω–∞–¥—É—Ç—å —ç—Ç—É –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, –≤—ã—á–∏—Ç–∞—è –Ω–µ–±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ SDF:

```
#define SDF(p) length(vec2(PLANE_Z, SPHERE))-.2
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ `-.2` –≤ –∫–æ–Ω—Ü–µ —Ñ–æ—Ä–º—É–ª—ã.
https://bit.ly/3bXGTBJ

![](/assets/media/surface-intersection-4.gif)

---

5. –ú–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É –∏ –ø–æ–¥—É–º–∞—Ç—å, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ü–∏–ª–∏–Ω–¥—Ä, –∏—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ—Ç —Ç—Ä—é–∫?

---

6. –û—Ç–ª–∏—á–Ω–æ, —É –≤–∞—Å –ø–æ–ª—É—á–∏–ª–æ—Å—å! –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –ø–ª–æ—Å–∫–æ—Å—Ç–µ–π, –Ω–∞–¥—É—Ç–æ–µ –≤—ã—á–∏—Ç–∞–Ω–∏–µ–º –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:

```
#define SDF(p) length(vec2(PLANE_X, PLANE_Z))-1.2
```

–ß–∞—Å—Ç–æ —ç—Ç–æ —Å–æ–∫—Ä–∞—â–∞—é—Ç –¥–æ `length(p.xz)-1.2`, —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ.

https://bit.ly/30me4cZ

![](/assets/media/surface-intersection-6.gif)

---

7. –ü–µ—Ä–µ—Å–µ—á—ë–º —Ü–∏–ª–∏–Ω–¥—Ä—ã! –ü–æ–ª—É—á–∞—Ç—Å—è –¥–≤–∞ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö—Å—è –∫—Ä—É–≥–∞

```
#define CYLINDER_Y length(vec2(PLANE_X, PLANE_Z))-1.2
#define CYLINDER_X length(vec2(PLANE_Y, PLANE_Z))-1.2
SPHERE))-.01
#define SDF(p) length(vec2(CYLINDER_Y, CYLINDER_X))-.1
```

https://bit.ly/3883WbT

![](/assets/media/surface-intersection-7.gif)

---

8. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –±–µ–∑—É–º–∏–µ! –û—Å—Ç–æ—Ä–æ–∂–Ω–æ, –≥–∏—Ä–æ–∏–¥

```
#define GYROID dot(sin(p*9.),cos(p.zxy*9.))*.1
#define SDF(p) GYROID
```

–°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –µ–≥–æ —Ñ–æ—Ä–º—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –≥–∏—Ä–æ–∏–¥ –±–µ—Å–∫–æ–Ω–µ—á–µ–Ω –∏ –º—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ https://bit.ly/3070hqe

![](/assets/media/surface-intersection-8.gif)

---

9. –ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –µ–≥–æ —Ñ–æ—Ä–º—É, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–µ—á—å –µ–≥–æ —Å –∫–∞–∫–∏–º-—Ç–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏–º–∏—Ç–∏–≤–æ–º. –ü–æ—á–µ–º—É –±—ã –Ω–µ —Å–æ —Å—Ñ–µ—Ä–æ–π?

```
#define SDF(p) length(vec2(SPHERE, GYROID))-.02
```

https://bit.ly/30a2scU

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≥–∏—Ä–æ–∏–¥–∞—Ö –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –Ω–∞ https://en.wikipedia.org/wiki/Gyroid

![](/assets/media/surface-intersection-9.gif)

---

10. –•–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ—Å–µ—á—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è? –ë–µ–∑ –ø—Ä–æ–±–ª–µ–º! –ú–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à—É —Å—Ç—Ä–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É –∏–∑ —Ç–≤–∏—Ç–∞ #7:

```
#define CROSS_RINGS length(vec2(CYLINDER_Y, CYLINDER_X))-.2
#define SDF(p) length(vec2(CROSS_RINGS, GYROID))-.01
```

https://bit.ly/3kGYWjr

![](/assets/media/surface-intersection-10.gif)

---

11. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–µ—á—å –±–æ–ª—å—à–µ –¥–≤—É—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π —Å—Ä–∞–∑—É! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —ç—Ç–æ–≥–æ vec3 –∏–ª–∏ vec4:

```
#define SDF(p) length(vec3(CYLINDER_Y, CYLINDER_X, SPHERE))-.1
```

https://bit.ly/3uT3ZSu

![](/assets/media/surface-intersection-11.gif)

---

12. –ò–∏–∏–∏–∏‚Ä¶ –æ–±—ã—á–Ω—ã–π SDF —Å—Ñ–µ—Ä—ã ‚Äî —ç—Ç–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ç–æ–π –∂–µ —Å–∞–º–æ–π —Ñ–æ—Ä–º—É–ª—ã!

```
#define SDF(p) length(vec3(PLANE_X, PLANE_Y, PLANE_Z))-.9
```
‚Üì
```
#define SDF(p) length(p.xyz)-.9
```
‚Üì
```
#define SDF(p) length(p)-.9
```

–Ø –±—ã–ª –≤ —à–æ–∫–µ, –∫–æ–≥–¥–∞ —É–∑–Ω–∞–ª –æ–± —ç—Ç–æ–º! ü§Ø

---

13. –í–æ—Ç –∏ –≤—Å—ë! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏–≥—Ä–∞—Ç—å —Å –∫–æ–¥–æ–º, –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º–æ–≥—É—Ç –≤–Ω–µ–∑–∞–ø–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è https://bit.ly/3uSmvdO

–≠—Ç–æ –º–æ–π –ø–µ—Ä–≤—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª-—Ç—Ä–µ–¥. –ë—É–¥—É –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω, –µ—Å–ª–∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –º—ã—Å–ª—è–º–∏ –ø–æ —Ç–µ–º–µ, –∑–∞–¥–∞–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ö–≤–∞—Å—Ç–∞–µ—Ç–µ—Å—å SDF, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫—Ä–æ–µ—Ç–µ.

![](/assets/media/surface-intersection-13.gif)
